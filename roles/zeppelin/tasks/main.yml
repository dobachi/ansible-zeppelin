---
# tasks file for roles/zeppelin

- block:

  - name: mkdir zeppelin
    file:
      path: /opt/zeppelin
      state: directory


  - name: downlaod zeppelin
    get_url:
      url: http://ftp.tsukuba.wide.ad.jp/software/apache/zeppelin/zeppelin-{{zeppelin_version}}/zeppelin-{{zeppelin_version}}-bin-all.tgz
      dest: /opt/zeppelin/
      force: no

  - name: unarchive zeppelin package
    unarchive:
      src: /opt/zeppelin/zeppelin-{{zeppelin_version}}-bin-all.tgz
      dest: /opt/zeppelin

  - name: configure alternatives
    alternatives:
      name: zeppelin
      link: /opt/zeppelin/default
      path: /opt/zeppelin/zeppelin-{{zeppelin_version}}

  tags:
    - zeppelin